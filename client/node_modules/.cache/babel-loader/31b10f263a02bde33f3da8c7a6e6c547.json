{"ast":null,"code":"import React, { forwardRef, useState, useRef } from 'react';\nimport { useUncontrolled } from '@mantine/hooks';\nimport { Box } from '@mantine/core';\nimport { YearPicker } from './YearPicker/YearPicker.js';\nimport { MonthPicker } from './MonthPicker/MonthPicker.js';\nimport { MonthsList } from './MonthsList/MonthsList.js';\nimport useStyles from './CalendarBase.styles.js';\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\n\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\n\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {})) if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n\n  if (__getOwnPropSymbols) for (var prop of __getOwnPropSymbols(b)) {\n    if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  }\n  return a;\n};\n\nvar __objRest = (source, exclude) => {\n  var target = {};\n\n  for (var prop in source) if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0) target[prop] = source[prop];\n\n  if (source != null && __getOwnPropSymbols) for (var prop of __getOwnPropSymbols(source)) {\n    if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop)) target[prop] = source[prop];\n  }\n  return target;\n};\n\nconst CalendarBase = forwardRef((_a, ref) => {\n  var _b = _a,\n      {\n    className,\n    classNames,\n    styles,\n    month,\n    initialMonth,\n    onMonthChange,\n    locale,\n    amountOfMonths = 1,\n    paginateBy = amountOfMonths,\n    size = \"sm\",\n    allowLevelChange = true,\n    initialLevel = \"date\",\n    minDate,\n    maxDate,\n    __staticSelector = \"CalendarBase\",\n    dayClassName,\n    dayStyle,\n    disableOutsideEvents,\n    excludeDate,\n    hideWeekdays,\n    fullWidth,\n    preventFocus,\n    firstDayOfWeek = \"monday\",\n    value,\n    onChange,\n    onDayMouseEnter,\n    range,\n    nextDecadeLabel,\n    nextMonthLabel,\n    nextYearLabel,\n    previousDecadeLabel,\n    previousMonthLabel,\n    previousYearLabel,\n    labelFormat = \"MMMM YYYY\",\n    weekdayLabelFormat,\n    hideOutsideDates,\n    isDateInRange,\n    isDateFirstInRange,\n    isDateLastInRange,\n    renderDay,\n    unstyled,\n    weekendDays,\n    __stopPropagation,\n    yearLabelFormat = \"YYYY\"\n  } = _b,\n      others = __objRest(_b, [\"className\", \"classNames\", \"styles\", \"month\", \"initialMonth\", \"onMonthChange\", \"locale\", \"amountOfMonths\", \"paginateBy\", \"size\", \"allowLevelChange\", \"initialLevel\", \"minDate\", \"maxDate\", \"__staticSelector\", \"dayClassName\", \"dayStyle\", \"disableOutsideEvents\", \"excludeDate\", \"hideWeekdays\", \"fullWidth\", \"preventFocus\", \"firstDayOfWeek\", \"value\", \"onChange\", \"onDayMouseEnter\", \"range\", \"nextDecadeLabel\", \"nextMonthLabel\", \"nextYearLabel\", \"previousDecadeLabel\", \"previousMonthLabel\", \"previousYearLabel\", \"labelFormat\", \"weekdayLabelFormat\", \"hideOutsideDates\", \"isDateInRange\", \"isDateFirstInRange\", \"isDateLastInRange\", \"renderDay\", \"unstyled\", \"weekendDays\", \"__stopPropagation\", \"yearLabelFormat\"]);\n\n  const [selectionState, setSelectionState] = useState(initialLevel);\n  const {\n    classes,\n    cx,\n    theme\n  } = useStyles({\n    size,\n    fullWidth,\n    amountOfMonths: selectionState === \"date\" ? amountOfMonths : 1\n  }, {\n    name: __staticSelector,\n    styles,\n    classNames,\n    unstyled\n  });\n  const finalLocale = locale || theme.datesLocale;\n  const daysRefs = useRef(Array(amountOfMonths).fill(0).map(() => []));\n  const [_month, setMonth] = useUncontrolled({\n    value: month,\n    defaultValue: initialMonth,\n    finalValue: new Date(),\n    onChange: onMonthChange\n  });\n  const [yearSelection, setYearSelection] = useState(_month.getFullYear());\n  const minYear = minDate instanceof Date ? minDate.getFullYear() : 100;\n  const maxYear = maxDate instanceof Date ? maxDate.getFullYear() : 1e4;\n  const daysPerRow = 6;\n\n  const focusOnNextFocusableDay = function (direction, monthIndex, payload) {\n    let n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n    const changeRow = [\"down\", \"up\"].includes(direction);\n    const rowIndex = changeRow ? payload.rowIndex + (direction === \"down\" ? n : -n) : payload.rowIndex;\n    const cellIndex = changeRow ? payload.cellIndex : payload.cellIndex + (direction === \"right\" ? n : -n);\n    const dayToFocus = daysRefs.current[monthIndex][rowIndex][cellIndex];\n\n    if (!dayToFocus) {\n      return;\n    }\n\n    if (dayToFocus.disabled) {\n      focusOnNextFocusableDay(direction, monthIndex, payload, n + 1);\n    } else {\n      dayToFocus.focus();\n    }\n  };\n\n  const handleDayKeyDown = (monthIndex, payload, event) => {\n    var _a2;\n\n    switch (event.key) {\n      case \"ArrowDown\":\n        {\n          event.preventDefault();\n          const hasRowBelow = payload.rowIndex + 1 < daysRefs.current[monthIndex].length;\n\n          if (hasRowBelow) {\n            focusOnNextFocusableDay(\"down\", monthIndex, payload);\n          }\n\n          break;\n        }\n\n      case \"ArrowUp\":\n        {\n          event.preventDefault();\n          const hasRowAbove = payload.rowIndex > 0;\n\n          if (hasRowAbove) {\n            focusOnNextFocusableDay(\"up\", monthIndex, payload);\n          }\n\n          break;\n        }\n\n      case \"ArrowRight\":\n        {\n          event.preventDefault();\n          const isNotLastCell = payload.cellIndex !== daysPerRow;\n\n          if (isNotLastCell) {\n            focusOnNextFocusableDay(\"right\", monthIndex, payload);\n          } else if (monthIndex + 1 < amountOfMonths) {\n            if (daysRefs.current[monthIndex + 1][payload.rowIndex]) {\n              (_a2 = daysRefs.current[monthIndex + 1][payload.rowIndex][0]) == null ? void 0 : _a2.focus();\n            }\n          }\n\n          break;\n        }\n\n      case \"ArrowLeft\":\n        {\n          event.preventDefault();\n\n          if (payload.cellIndex !== 0) {\n            focusOnNextFocusableDay(\"left\", monthIndex, payload);\n          } else if (monthIndex > 0) {\n            if (daysRefs.current[monthIndex - 1][payload.rowIndex]) {\n              daysRefs.current[monthIndex - 1][payload.rowIndex][daysPerRow].focus();\n            }\n          }\n        }\n    }\n  };\n\n  return /* @__PURE__ */React.createElement(Box, __spreadValues({\n    className: cx(classes.calendarBase, className),\n    ref\n  }, others), selectionState === \"year\" && /* @__PURE__ */React.createElement(YearPicker, {\n    size,\n    value: yearSelection,\n    minYear,\n    maxYear,\n    onChange: year => {\n      setYearSelection(year);\n      setSelectionState(\"month\");\n    },\n    classNames,\n    styles,\n    __staticSelector,\n    nextDecadeLabel,\n    previousDecadeLabel,\n    preventFocus,\n    unstyled,\n    yearLabelFormat\n  }), selectionState === \"month\" && /* @__PURE__ */React.createElement(MonthPicker, {\n    size,\n    value: {\n      month: _month.getMonth(),\n      year: _month.getFullYear()\n    },\n    year: yearSelection,\n    onYearChange: setYearSelection,\n    onNextLevel: () => setSelectionState(\"year\"),\n    locale: finalLocale,\n    minDate,\n    maxDate,\n    onChange: monthValue => {\n      setMonth(new Date(yearSelection, monthValue, 1));\n      setSelectionState(\"date\");\n    },\n    classNames,\n    styles,\n    __staticSelector,\n    nextYearLabel,\n    previousYearLabel,\n    preventFocus,\n    unstyled,\n    yearLabelFormat\n  }), selectionState === \"date\" && /* @__PURE__ */React.createElement(MonthsList, {\n    amountOfMonths,\n    paginateBy,\n    month: _month,\n    locale: finalLocale,\n    minDate,\n    maxDate,\n    allowLevelChange,\n    size,\n    daysRefs,\n    onMonthChange: setMonth,\n    onNextLevel: () => setSelectionState(\"month\"),\n    onDayKeyDown: handleDayKeyDown,\n    classNames,\n    styles,\n    __staticSelector,\n    dayClassName,\n    dayStyle,\n    disableOutsideEvents,\n    excludeDate,\n    hideWeekdays,\n    fullWidth,\n    preventFocus,\n    firstDayOfWeek,\n    value,\n    range,\n    onChange,\n    nextMonthLabel,\n    previousMonthLabel,\n    labelFormat,\n    weekdayLabelFormat,\n    onDayMouseEnter,\n    renderDay,\n    hideOutsideDates,\n    isDateInRange,\n    isDateFirstInRange,\n    isDateLastInRange,\n    unstyled,\n    weekendDays,\n    __stopPropagation\n  }));\n});\nCalendarBase.displayName = \"@mantine/dates/CalendarBase\";\nexport { CalendarBase };","map":{"version":3,"mappings":"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","names":["__defProp","Object","defineProperty","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","key","value","enumerable","configurable","writable","__spreadValues","a","b","prop","call","__objRest","source","exclude","target","indexOf","CalendarBase","forwardRef","_a","ref","_b","className","classNames","styles","month","initialMonth","onMonthChange","locale","amountOfMonths","paginateBy","size","allowLevelChange","initialLevel","minDate","maxDate","__staticSelector","dayClassName","dayStyle","disableOutsideEvents","excludeDate","hideWeekdays","fullWidth","preventFocus","firstDayOfWeek","onChange","onDayMouseEnter","range","nextDecadeLabel","nextMonthLabel","nextYearLabel","previousDecadeLabel","previousMonthLabel","previousYearLabel","labelFormat","weekdayLabelFormat","hideOutsideDates","isDateInRange","isDateFirstInRange","isDateLastInRange","renderDay","unstyled","weekendDays","__stopPropagation","yearLabelFormat","others","selectionState","setSelectionState","useState","classes","cx","theme","useStyles","name","finalLocale","datesLocale","daysRefs","useRef","Array","fill","map","_month","setMonth","useUncontrolled","defaultValue","finalValue","Date","yearSelection","setYearSelection","getFullYear","minYear","maxYear","daysPerRow","focusOnNextFocusableDay","direction","monthIndex","payload","n","changeRow","includes","rowIndex","cellIndex","dayToFocus","current","disabled","focus","handleDayKeyDown","event","_a2","preventDefault","hasRowBelow","length","hasRowAbove","isNotLastCell","React","createElement","Box","calendarBase","YearPicker","year","MonthPicker","getMonth","onYearChange","onNextLevel","monthValue","MonthsList","onDayKeyDown","displayName"],"sources":["../../../src/components/CalendarBase/CalendarBase.tsx"],"sourcesContent":["import React, { useRef, useState, forwardRef } from 'react';\nimport { useUncontrolled } from '@mantine/hooks';\nimport { Box, MantineSize, Selectors, DefaultProps } from '@mantine/core';\nimport { MonthSettings, DayKeydownPayload } from '../Month';\nimport { YearPicker, YearPickerStylesNames } from './YearPicker/YearPicker';\nimport { MonthPicker, MonthPickerStylesNames } from './MonthPicker/MonthPicker';\nimport { MonthsList, MonthsListStylesNames } from './MonthsList/MonthsList';\nimport useStyles from './CalendarBase.styles';\n\nexport type CalendarBaseStylesNames =\n  | Selectors<typeof useStyles>\n  | YearPickerStylesNames\n  | MonthPickerStylesNames\n  | MonthsListStylesNames;\n\nexport interface CalendarSharedProps extends DefaultProps<CalendarBaseStylesNames>, MonthSettings {\n  /** Month for controlled calendar */\n  month?: Date;\n\n  /** Initial month for uncontrolled calendar */\n  initialMonth?: Date;\n\n  /** Called when month changes */\n  onMonthChange?(month: Date): void;\n\n  /** Locale used for labels formatting, defaults to theme.datesLocale */\n  locale?: string;\n\n  /** Amount of months */\n  amountOfMonths?: number;\n\n  /** Paginate by amount of months */\n  paginateBy?: number;\n\n  /** Selected value */\n  value?: Date | Date[] | null;\n\n  /** Calendar size */\n  size?: MantineSize;\n\n  /** Allow to change level (date – month – year) */\n  allowLevelChange?: boolean;\n\n  /** Initial date selection level */\n  initialLevel?: 'date' | 'month' | 'year';\n\n  /** Static selector base */\n  __staticSelector?: string;\n\n  /** Selected range */\n  range?: [Date, Date];\n\n  /** Render day based on the date */\n  renderDay?(date: Date): React.ReactNode;\n\n  /** Called when day is selected */\n  onChange?(value: Date | Date[]): void;\n\n  /** Called when onMouseEnter event fired on day button */\n  onDayMouseEnter?(date: Date, event: React.MouseEvent): void;\n\n  /** Next month control aria-label */\n  nextMonthLabel?: string;\n\n  /** Previous month control aria-label */\n  previousMonthLabel?: string;\n\n  /** Next year control aria-label */\n  nextYearLabel?: string;\n\n  /** Previous year control aria-label */\n  previousYearLabel?: string;\n\n  /** Next decade control aria-label */\n  nextDecadeLabel?: string;\n\n  /** Previous decade control aria-label */\n  previousDecadeLabel?: string;\n\n  /** dayjs Calendar month label format */\n  labelFormat?: string;\n\n  /** dayjs Calendar year label format */\n  yearLabelFormat?: string;\n\n  /** dayjs label format for weekday heading */\n  weekdayLabelFormat?: string;\n}\n\nexport interface CalendarBaseProps\n  extends CalendarSharedProps,\n    Omit<React.ComponentPropsWithoutRef<'div'>, 'value' | 'onChange'> {}\n\nexport const CalendarBase = forwardRef<HTMLDivElement, CalendarBaseProps>(\n  (\n    {\n      className,\n      classNames,\n      styles,\n      month,\n      initialMonth,\n      onMonthChange,\n      locale,\n      amountOfMonths = 1,\n      paginateBy = amountOfMonths,\n      size = 'sm',\n      allowLevelChange = true,\n      initialLevel = 'date',\n      minDate,\n      maxDate,\n      __staticSelector = 'CalendarBase',\n      dayClassName,\n      dayStyle,\n      disableOutsideEvents,\n      excludeDate,\n      hideWeekdays,\n      fullWidth,\n      preventFocus,\n      firstDayOfWeek = 'monday',\n      value,\n      onChange,\n      onDayMouseEnter,\n      range,\n      nextDecadeLabel,\n      nextMonthLabel,\n      nextYearLabel,\n      previousDecadeLabel,\n      previousMonthLabel,\n      previousYearLabel,\n      labelFormat = 'MMMM YYYY',\n      weekdayLabelFormat,\n      hideOutsideDates,\n      isDateInRange,\n      isDateFirstInRange,\n      isDateLastInRange,\n      renderDay,\n      unstyled,\n      weekendDays,\n      __stopPropagation,\n      yearLabelFormat = 'YYYY',\n      ...others\n    }: CalendarBaseProps,\n    ref\n  ) => {\n    const [selectionState, setSelectionState] = useState(initialLevel);\n    const { classes, cx, theme } = useStyles(\n      { size, fullWidth, amountOfMonths: selectionState === 'date' ? amountOfMonths : 1 },\n      { name: __staticSelector, styles, classNames, unstyled }\n    );\n    const finalLocale = locale || theme.datesLocale;\n\n    const daysRefs = useRef<HTMLButtonElement[][][]>(\n      Array(amountOfMonths)\n        .fill(0)\n        .map(() => [])\n    );\n\n    const [_month, setMonth] = useUncontrolled({\n      value: month,\n      defaultValue: initialMonth,\n      finalValue: new Date(),\n      onChange: onMonthChange,\n    });\n\n    const [yearSelection, setYearSelection] = useState(_month.getFullYear());\n    const minYear = minDate instanceof Date ? minDate.getFullYear() : 100;\n    const maxYear = maxDate instanceof Date ? maxDate.getFullYear() : 10000;\n\n    const daysPerRow = 6;\n\n    const focusOnNextFocusableDay = (\n      direction: 'down' | 'up' | 'left' | 'right',\n      monthIndex: number,\n      payload: DayKeydownPayload,\n      n = 1\n    ) => {\n      const changeRow = ['down', 'up'].includes(direction);\n\n      const rowIndex = changeRow\n        ? payload.rowIndex + (direction === 'down' ? n : -n)\n        : payload.rowIndex;\n\n      const cellIndex = changeRow\n        ? payload.cellIndex\n        : payload.cellIndex + (direction === 'right' ? n : -n);\n\n      const dayToFocus = daysRefs.current[monthIndex][rowIndex][cellIndex];\n\n      if (!dayToFocus) {\n        return;\n      }\n\n      if (dayToFocus.disabled) {\n        // Day is disabled, call this function recursively until\n        // we find a non-disabled day or there are no more days\n        focusOnNextFocusableDay(direction, monthIndex, payload, n + 1);\n      } else {\n        dayToFocus.focus();\n      }\n    };\n\n    const handleDayKeyDown = (\n      monthIndex: number,\n      payload: DayKeydownPayload,\n      event: React.KeyboardEvent<HTMLButtonElement>\n    ) => {\n      switch (event.key) {\n        case 'ArrowDown': {\n          event.preventDefault();\n\n          const hasRowBelow = payload.rowIndex + 1 < daysRefs.current[monthIndex].length;\n          if (hasRowBelow) {\n            focusOnNextFocusableDay('down', monthIndex, payload);\n          }\n          break;\n        }\n\n        case 'ArrowUp': {\n          event.preventDefault();\n\n          const hasRowAbove = payload.rowIndex > 0;\n          if (hasRowAbove) {\n            focusOnNextFocusableDay('up', monthIndex, payload);\n          }\n          break;\n        }\n\n        case 'ArrowRight': {\n          event.preventDefault();\n\n          const isNotLastCell = payload.cellIndex !== daysPerRow;\n          if (isNotLastCell) {\n            focusOnNextFocusableDay('right', monthIndex, payload);\n          } else if (monthIndex + 1 < amountOfMonths) {\n            if (daysRefs.current[monthIndex + 1][payload.rowIndex]) {\n              daysRefs.current[monthIndex + 1][payload.rowIndex][0]?.focus();\n            }\n          }\n\n          break;\n        }\n\n        case 'ArrowLeft': {\n          event.preventDefault();\n\n          if (payload.cellIndex !== 0) {\n            focusOnNextFocusableDay('left', monthIndex, payload);\n          } else if (monthIndex > 0) {\n            if (daysRefs.current[monthIndex - 1][payload.rowIndex]) {\n              daysRefs.current[monthIndex - 1][payload.rowIndex][daysPerRow].focus();\n            }\n          }\n        }\n      }\n    };\n\n    return (\n      <Box className={cx(classes.calendarBase, className)} ref={ref} {...others}>\n        {selectionState === 'year' && (\n          <YearPicker\n            size={size}\n            value={yearSelection}\n            minYear={minYear}\n            maxYear={maxYear}\n            onChange={(year) => {\n              setYearSelection(year);\n              setSelectionState('month');\n            }}\n            classNames={classNames}\n            styles={styles}\n            __staticSelector={__staticSelector}\n            nextDecadeLabel={nextDecadeLabel}\n            previousDecadeLabel={previousDecadeLabel}\n            preventFocus={preventFocus}\n            unstyled={unstyled}\n            yearLabelFormat={yearLabelFormat}\n          />\n        )}\n\n        {selectionState === 'month' && (\n          <MonthPicker\n            size={size}\n            value={{ month: _month.getMonth(), year: _month.getFullYear() }}\n            year={yearSelection}\n            onYearChange={setYearSelection}\n            onNextLevel={() => setSelectionState('year')}\n            locale={finalLocale}\n            minDate={minDate}\n            maxDate={maxDate}\n            onChange={(monthValue) => {\n              setMonth(new Date(yearSelection, monthValue, 1));\n              setSelectionState('date');\n            }}\n            classNames={classNames}\n            styles={styles}\n            __staticSelector={__staticSelector}\n            nextYearLabel={nextYearLabel}\n            previousYearLabel={previousYearLabel}\n            preventFocus={preventFocus}\n            unstyled={unstyled}\n            yearLabelFormat={yearLabelFormat}\n          />\n        )}\n\n        {selectionState === 'date' && (\n          <MonthsList\n            amountOfMonths={amountOfMonths}\n            paginateBy={paginateBy}\n            month={_month}\n            locale={finalLocale}\n            minDate={minDate}\n            maxDate={maxDate}\n            allowLevelChange={allowLevelChange}\n            size={size}\n            daysRefs={daysRefs}\n            onMonthChange={setMonth}\n            onNextLevel={() => setSelectionState('month')}\n            onDayKeyDown={handleDayKeyDown}\n            classNames={classNames}\n            styles={styles}\n            __staticSelector={__staticSelector}\n            dayClassName={dayClassName}\n            dayStyle={dayStyle}\n            disableOutsideEvents={disableOutsideEvents}\n            excludeDate={excludeDate}\n            hideWeekdays={hideWeekdays}\n            fullWidth={fullWidth}\n            preventFocus={preventFocus}\n            firstDayOfWeek={firstDayOfWeek}\n            value={value}\n            range={range}\n            onChange={onChange}\n            nextMonthLabel={nextMonthLabel}\n            previousMonthLabel={previousMonthLabel}\n            labelFormat={labelFormat}\n            weekdayLabelFormat={weekdayLabelFormat}\n            onDayMouseEnter={onDayMouseEnter}\n            renderDay={renderDay}\n            hideOutsideDates={hideOutsideDates}\n            isDateInRange={isDateInRange}\n            isDateFirstInRange={isDateFirstInRange}\n            isDateLastInRange={isDateLastInRange}\n            unstyled={unstyled}\n            weekendDays={weekendDays}\n            __stopPropagation={__stopPropagation}\n          />\n        )}\n      </Box>\n    );\n  }\n);\n\nCalendarBase.displayName = '@mantine/dates/CalendarBase';\n"]},"metadata":{},"sourceType":"module"}