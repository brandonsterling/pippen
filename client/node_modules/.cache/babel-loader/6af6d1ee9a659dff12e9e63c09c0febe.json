{"ast":null,"code":"import dayjs from 'dayjs';\nimport React, { forwardRef, useState } from 'react';\nimport { useComponentDefaultProps } from '@mantine/core';\nimport { isSameDate } from '../../utils/is-same-date/is-same-date.js';\nimport { CalendarBase } from '../CalendarBase/CalendarBase.js';\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\n\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\n\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {})) if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n\n  if (__getOwnPropSymbols) for (var prop of __getOwnPropSymbols(b)) {\n    if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  }\n  return a;\n};\n\nvar __objRest = (source, exclude) => {\n  var target = {};\n\n  for (var prop in source) if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0) target[prop] = source[prop];\n\n  if (source != null && __getOwnPropSymbols) for (var prop of __getOwnPropSymbols(source)) {\n    if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop)) target[prop] = source[prop];\n  }\n  return target;\n};\n\nconst defaultProps = {\n  __staticSelector: \"RangeCalendar\",\n  allowSingleDateInRange: false,\n  amountOfMonths: 1\n};\nconst RangeCalendar = forwardRef((props, ref) => {\n  const _a = useComponentDefaultProps(\"RangeCalendar\", defaultProps, props),\n        {\n    value,\n    onChange,\n    dayStyle,\n    onMouseLeave,\n    __staticSelector,\n    allowSingleDateInRange,\n    amountOfMonths,\n    paginateBy\n  } = _a,\n        others = __objRest(_a, [\"value\", \"onChange\", \"dayStyle\", \"onMouseLeave\", \"__staticSelector\", \"allowSingleDateInRange\", \"amountOfMonths\", \"paginateBy\"]);\n\n  const [hoveredDay, setHoveredDay] = useState(null);\n  const [pickedDate, setPickedDate] = useState(null);\n\n  const setRangeDate = date => {\n    if (pickedDate instanceof Date) {\n      if (isSameDate(date, pickedDate) && !allowSingleDateInRange) {\n        setPickedDate(null);\n        setHoveredDay(null);\n        return null;\n      }\n\n      const result = [date, pickedDate];\n      result.sort((a, b) => a.getTime() - b.getTime());\n      onChange(result);\n      setPickedDate(null);\n      return null;\n    }\n\n    if (value[0] && isSameDate(date, value[0]) && !allowSingleDateInRange) {\n      setPickedDate(null);\n      setHoveredDay(null);\n      onChange([null, null]);\n      return null;\n    }\n\n    onChange([date, null]);\n    setPickedDate(date);\n    return null;\n  };\n\n  const handleMouseLeave = event => {\n    typeof onMouseLeave === \"function\" && onMouseLeave(event);\n    setHoveredDay(null);\n  };\n\n  const shouldHighlightDate = (date, modifiers) => {\n    if (pickedDate instanceof Date && hoveredDay instanceof Date) {\n      const result = [hoveredDay, pickedDate];\n      result.sort((a, b) => a.getTime() - b.getTime());\n      return !modifiers.selected && dayjs(date).subtract(1, \"day\").isBefore(result[1]) && dayjs(date).add(1, \"day\").isAfter(result[0]);\n    }\n\n    return false;\n  };\n\n  const isPickedDateFirstInRange = (date, modifiers) => {\n    if (pickedDate instanceof Date && hoveredDay instanceof Date) {\n      const result = [hoveredDay, pickedDate];\n      result.sort((a, b) => a.getTime() - b.getTime());\n      return modifiers.selected && dayjs(date).isBefore(result[1]);\n    }\n\n    return false;\n  };\n\n  const isPickedDateLastInRange = (date, modifiers) => {\n    if (pickedDate instanceof Date && hoveredDay instanceof Date) {\n      const result = [hoveredDay, pickedDate];\n      result.sort((a, b) => a.getTime() - b.getTime());\n      return modifiers.selected && dayjs(date).isAfter(result[0]);\n    }\n\n    return false;\n  };\n\n  return /* @__PURE__ */React.createElement(CalendarBase, __spreadValues({\n    dayStyle,\n    onMouseLeave: handleMouseLeave,\n    onDayMouseEnter: date => setHoveredDay(date),\n    onChange: setRangeDate,\n    value: pickedDate,\n    range: value,\n    ref,\n    __staticSelector,\n    amountOfMonths,\n    paginateBy: paginateBy || amountOfMonths,\n    hideOutsideDates: amountOfMonths > 1,\n    isDateInRange: shouldHighlightDate,\n    isDateFirstInRange: isPickedDateFirstInRange,\n    isDateLastInRange: isPickedDateLastInRange\n  }, others));\n});\nRangeCalendar.displayName = \"@mantine/dates/RangeCalendar\";\nexport { RangeCalendar };","map":{"version":3,"mappings":"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","names":["__defProp","Object","defineProperty","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","key","value","enumerable","configurable","writable","__spreadValues","a","b","prop","call","__objRest","source","exclude","target","indexOf","defaultProps","__staticSelector","allowSingleDateInRange","amountOfMonths","RangeCalendar","forwardRef","props","ref","_a","useComponentDefaultProps","onChange","dayStyle","onMouseLeave","paginateBy","others","hoveredDay","setHoveredDay","useState","pickedDate","setPickedDate","setRangeDate","date","Date","isSameDate","result","sort","getTime","handleMouseLeave","event","shouldHighlightDate","modifiers","selected","dayjs","subtract","isBefore","add","isAfter","isPickedDateFirstInRange","isPickedDateLastInRange","React","createElement","CalendarBase","onDayMouseEnter","range","hideOutsideDates","isDateInRange","isDateFirstInRange","isDateLastInRange","displayName"],"sources":["../../../src/components/RangeCalendar/RangeCalendar.tsx"],"sourcesContent":["import dayjs from 'dayjs';\nimport React, { useState, forwardRef } from 'react';\nimport { useComponentDefaultProps } from '@mantine/core';\nimport { isSameDate } from '../../utils';\nimport { DayModifiers } from '../Month';\nimport { CalendarBase, CalendarBaseProps } from '../CalendarBase/CalendarBase';\n\nexport interface RangeCalendarProps extends Omit<CalendarBaseProps, 'value' | 'onChange'> {\n  /** Selected dates */\n  value: [Date | null, Date | null];\n\n  /** Called when selected date changes */\n  onChange(value: [Date, Date]): void;\n\n  /** Allow one date to be selected as range */\n  allowSingleDateInRange?: boolean;\n}\n\nconst defaultProps: Partial<RangeCalendarProps> = {\n  __staticSelector: 'RangeCalendar',\n  allowSingleDateInRange: false,\n  amountOfMonths: 1,\n};\n\nexport const RangeCalendar = forwardRef<HTMLDivElement, RangeCalendarProps>(\n  (props: RangeCalendarProps, ref) => {\n    const {\n      value,\n      onChange,\n      dayStyle,\n      onMouseLeave,\n      __staticSelector,\n      allowSingleDateInRange,\n      amountOfMonths,\n      paginateBy,\n      ...others\n    } = useComponentDefaultProps('RangeCalendar', defaultProps, props);\n\n    const [hoveredDay, setHoveredDay] = useState<Date>(null);\n    const [pickedDate, setPickedDate] = useState<Date>(null);\n\n    const setRangeDate = (date: Date) => {\n      if (pickedDate instanceof Date) {\n        if (isSameDate(date, pickedDate) && !allowSingleDateInRange) {\n          setPickedDate(null);\n          setHoveredDay(null);\n          return null;\n        }\n\n        const result: [Date, Date] = [date, pickedDate];\n        result.sort((a, b) => a.getTime() - b.getTime());\n        onChange(result);\n        setPickedDate(null);\n        return null;\n      }\n\n      if (value[0] && isSameDate(date, value[0]) && !allowSingleDateInRange) {\n        setPickedDate(null);\n        setHoveredDay(null);\n        onChange([null, null]);\n        return null;\n      }\n\n      onChange([date, null]);\n      setPickedDate(date);\n      return null;\n    };\n\n    const handleMouseLeave = (event: React.MouseEvent<HTMLDivElement>) => {\n      typeof onMouseLeave === 'function' && onMouseLeave(event);\n      setHoveredDay(null);\n    };\n\n    const shouldHighlightDate = (date: Date, modifiers: DayModifiers) => {\n      if (pickedDate instanceof Date && hoveredDay instanceof Date) {\n        const result: [Date, Date] = [hoveredDay, pickedDate];\n        result.sort((a, b) => a.getTime() - b.getTime());\n        return (\n          !modifiers.selected &&\n          dayjs(date).subtract(1, 'day').isBefore(result[1]) &&\n          dayjs(date).add(1, 'day').isAfter(result[0])\n        );\n      }\n\n      return false;\n    };\n\n    const isPickedDateFirstInRange = (date: Date, modifiers: DayModifiers) => {\n      if (pickedDate instanceof Date && hoveredDay instanceof Date) {\n        const result: [Date, Date] = [hoveredDay, pickedDate];\n        result.sort((a, b) => a.getTime() - b.getTime());\n        return modifiers.selected && dayjs(date).isBefore(result[1]);\n      }\n\n      return false;\n    };\n\n    const isPickedDateLastInRange = (date: Date, modifiers: DayModifiers) => {\n      if (pickedDate instanceof Date && hoveredDay instanceof Date) {\n        const result: [Date, Date] = [hoveredDay, pickedDate];\n        result.sort((a, b) => a.getTime() - b.getTime());\n        return modifiers.selected && dayjs(date).isAfter(result[0]);\n      }\n\n      return false;\n    };\n\n    return (\n      <CalendarBase\n        dayStyle={dayStyle}\n        onMouseLeave={handleMouseLeave}\n        onDayMouseEnter={(date) => setHoveredDay(date)}\n        onChange={setRangeDate}\n        value={pickedDate}\n        range={value}\n        ref={ref}\n        __staticSelector={__staticSelector}\n        amountOfMonths={amountOfMonths}\n        paginateBy={paginateBy || amountOfMonths}\n        hideOutsideDates={amountOfMonths > 1}\n        isDateInRange={shouldHighlightDate}\n        isDateFirstInRange={isPickedDateFirstInRange}\n        isDateLastInRange={isPickedDateLastInRange}\n        {...others}\n      />\n    );\n  }\n);\n\nRangeCalendar.displayName = '@mantine/dates/RangeCalendar';\n"]},"metadata":{},"sourceType":"module"}