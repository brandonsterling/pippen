{"ast":null,"code":"var _jsxFileName = \"/Users/brandonsterling/Desktop/Projects/pippen/client/src/AuthProvider.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useContext } from \"react\";\nimport { loginUser, registerUser, resetPassword } from \"./services/auth\";\nimport AuthContext from \"./AuthContext\";\nimport { useLocalStorage } from \"@mantine/hooks\";\nimport { showNotification } from \"@mantine/notifications\";\nimport { Navigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [token, setToken] = useState(localStorage.getItem(\"token\"));\n  const [error, setError] = useState(null);\n  const [registered, setRegistered] = useState(false);\n\n  const handleLogin = user => {\n    if (error) {\n      setError(null);\n    }\n\n    loginUser(user).then(result => {\n      localStorage.setItem(\"token\", result.data.token);\n      setToken(result.data.token);\n    }).catch(error => {\n      setError(true);\n      showNotification({\n        title: \"Oh no!\",\n        color: \"red\",\n        message: error.response.data.message\n      });\n    });\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"token\");\n    setToken(null);\n  };\n\n  const handleReset = data => {\n    resetPassword(data).then(result => {\n      showNotification({\n        title: \"Success!\",\n        color: \"green\",\n        message: \"We've updated your password.\"\n      });\n    });\n  };\n\n  const handleRegister = user => {\n    registerUser(user).then(result => {\n      setRegistered(true);\n      showNotification({\n        title: \"Success!\",\n        color: \"green\",\n        message: \"We've sent you an email to confirm your account\"\n      });\n    }).catch(error => {\n      showNotification({\n        title: \"Oh no!\",\n        color: \"red\",\n        message: error.response.data.message\n      });\n    });\n  };\n\n  const value = {\n    token,\n    registered,\n    onLogin: handleLogin,\n    onResetPassword: handleReset,\n    onLogout: handleLogout,\n    onRegister: handleRegister,\n    error: error\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 10\n  }, this);\n};\n\n_s(AuthProvider, \"bjVeIwnmLQ+UCb+BznKBylTJRGA=\");\n\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n\n  return useContext(AuthContext);\n};\n\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","useState","useContext","loginUser","registerUser","resetPassword","AuthContext","useLocalStorage","showNotification","Navigate","AuthProvider","children","token","setToken","localStorage","getItem","error","setError","registered","setRegistered","handleLogin","user","then","result","setItem","data","catch","title","color","message","response","handleLogout","removeItem","handleReset","handleRegister","value","onLogin","onResetPassword","onLogout","onRegister","useAuth"],"sources":["/Users/brandonsterling/Desktop/Projects/pippen/client/src/AuthProvider.js"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { loginUser, registerUser, resetPassword } from \"./services/auth\";\nimport AuthContext from \"./AuthContext\";\nimport { useLocalStorage } from \"@mantine/hooks\";\nimport { showNotification } from \"@mantine/notifications\";\nimport { Navigate } from \"react-router-dom\";\n\nexport const AuthProvider = ({ children }) => {\n  const [token, setToken] = useState(localStorage.getItem(\"token\"));\n  const [error, setError] = useState(null);\n  const [registered, setRegistered] = useState(false);\n\n  const handleLogin = (user) => {\n    if (error) {\n      setError(null);\n    }\n    loginUser(user)\n      .then((result) => {\n        localStorage.setItem(\"token\", result.data.token);\n        setToken(result.data.token);\n      })\n      .catch((error) => {\n        setError(true);\n        showNotification({\n          title: \"Oh no!\",\n          color: \"red\",\n          message: error.response.data.message,\n        });\n      });\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"token\");\n    setToken(null);\n  };\n\n  const handleReset = (data) => {\n    resetPassword(data).then((result) => {\n      showNotification({\n        title: \"Success!\",\n        color: \"green\",\n        message: \"We've updated your password.\",\n      });\n    });\n  };\n\n  const handleRegister = (user) => {\n    registerUser(user)\n      .then((result) => {\n        setRegistered(true);\n        showNotification({\n          title: \"Success!\",\n          color: \"green\",\n          message: \"We've sent you an email to confirm your account\",\n        });\n      })\n      .catch((error) => {\n        showNotification({\n          title: \"Oh no!\",\n          color: \"red\",\n          message: error.response.data.message,\n        });\n      });\n  };\n\n  const value = {\n    token,\n    registered,\n    onLogin: handleLogin,\n    onResetPassword: handleReset,\n    onLogout: handleLogout,\n    onRegister: handleRegister,\n    error: error,\n  };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n};\n\nexport const useAuth = () => {\n  return useContext(AuthContext);\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}